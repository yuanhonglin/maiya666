(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/tabBar/index/index"],{1497:function(e,t,n){"use strict";n.r(t);var a=n("5cb6"),i=n("fe8d");for(var r in i)"default"!==r&&function(e){n.d(t,e,function(){return i[e]})}(r);n("51ef"),n("8f22");var o,c=n("f0c5"),u=Object(c["a"])(i["default"],a["b"],a["c"],!1,null,"20f58cf2",null,!1,a["a"],o);t["default"]=u.exports},"4fb3":function(e,t,n){},"51ef":function(e,t,n){"use strict";var a=n("e6a8"),i=n.n(a);i.a},"5cb6":function(e,t,n){"use strict";var a,i=function(){var e=this,t=e.$createElement;e._self._c},r=[];n.d(t,"b",function(){return i}),n.d(t,"c",function(){return r}),n.d(t,"a",function(){return a})},7211:function(e,t,n){"use strict";(function(e){n("0a10"),n("921b");a(n("66fd"));var t=a(n("1497"));function a(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n("6e42")["createPage"])},"8f22":function(e,t,n){"use strict";var a=n("4fb3"),i=n.n(a);i.a},ccb1:function(e,t,n){"use strict";(function(e,a){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n("a34a"));function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n,a,i,r,o){try{var c=e[r](o),u=c.value}catch(s){return void n(s)}c.done?t(u):Promise.resolve(u).then(a,i)}function c(e){return function(){var t=this,n=arguments;return new Promise(function(a,i){var r=e.apply(t,n);function c(e){o(r,a,i,c,u,"next",e)}function u(e){o(r,a,i,c,u,"throw",e)}c(void 0)})}}var u=n("e25f"),s=(n("702d"),{data:function(){return{tabList:[{img:"../../../static/imgs/taoci%20(139).png",name:"邀请患者"},{img:"../../../static/imgs/taoci%20(139).png",name:"群发"},{img:"../../../static/imgs/taoci%20(139).png",name:"认证"}],list:[],listt:[],chatPeopleList:[],hxIdsArr:[],aloneName:"",member:[],myTitle:"",myAloneName:"",hisHxid:"",renderList:[]}},onLoad:function(){var t=e.getStorageSync("memberList");a("log",t," at pages\\tabBar\\index\\index.vue:84"),""==t?(a("log",555," at pages\\tabBar\\index\\index.vue:86"),getApp().globalData.memberList=[]):(a("log",666,t," at pages\\tabBar\\index\\index.vue:89"),getApp().globalData.memberList=t,this.getRoster()),a("log",getApp().globalData.memberList," at pages\\tabBar\\index\\index.vue:93");var n=this;u.on("newChatMsg",function(e,t,i,r){a("log","监听到的新消息",i," at pages\\tabBar\\index\\index.vue:96"),n.getRoster()})},onShow:function(){this.myAloneName=e.getStorageSync("myUsername"),a("log",this.myAloneName," at pages\\tabBar\\index\\index.vue:103"),a("log",e.getStorageSync("userInfo")," at pages\\tabBar\\index\\index.vue:104"),a("log",this.$store.state," at pages\\tabBar\\index\\index.vue:105")},onPullDownRefresh:function(){a("log",88888," at pages\\tabBar\\index\\index.vue:108"),this.getRoster()},methods:{gotoqCode:function(){e.navigateTo({url:"../../views/index/qcode"})},puDetail:function(t){var n={myName:e.getStorageSync("myUsername"),yourName:t.username,paintName:t.nickname,userImg:t.userImg};e.navigateTo({url:"../../kefuPage/chat?username="+JSON.stringify(n)})},getRoster:function(){var t=c(i.default.mark(function t(){var n,r=this;return i.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return n=this,t.next=3,this.$http.getMessageList({doctor:e.getStorageSync("myUsername")}).then(function(e){a("log",e.data," at pages\\tabBar\\index\\index.vue:161"),r.renderList=e.data});case 3:n.chatPeopleList=n.getChatList(),a("log",n.chatPeopleList," at pages\\tabBar\\index\\index.vue:165"),e.stopPullDownRefresh();case 6:case"end":return t.stop()}},t,this)}));function n(){return t.apply(this,arguments)}return n}(),getChatList:function(){var t=this,n=[],i=getApp().globalData.memberList;a("log",i," at pages\\tabBar\\index\\index.vue:173");for(var r=e.getStorageSync("myUsername"),o=0;o<i.length;o++){var c=e.getStorageSync(i[o].name+r)||[],u=e.getStorageSync("rendered_"+i[o].name+r)||[],s=u.concat(c);s.length&&function(){var e=s[s.length-1];e.unReadCount=c.length,e.unReadCount>99&&(e.unReadCount="99+");var i=e.time.split(" ")[0].split("-"),r=e.time.split(" ")[1].split(":"),o=i[2]<10?"0"+i[2]:i[2];t.renderList.forEach(function(t,n){t.hid==e.username&&(a("log","添加头像和名字"," at pages\\tabBar\\index\\index.vue:192"),e.userImg=t.photo,e.nickname=t.nickname)}),e.timestamp=(new Date).getTime(e.time),e.dateTimeNum="".concat(i[0]).concat(i[1]).concat(o).concat(r[0]).concat(r[1]).concat(r[2]),e.time="".concat(i[0],"-").concat(i[1],"-").concat(o," ").concat(r[0],":").concat(r[1],":").concat(r[2]),n.push(e)}()}return n.sort(function(e,t){return t.dateTimeNum-e.dateTimeNum}),n}}});t.default=s}).call(this,n("6e42")["default"],n("0de9")["default"])},e6a8:function(e,t,n){},fe8d:function(e,t,n){"use strict";n.r(t);var a=n("ccb1"),i=n.n(a);for(var r in a)"default"!==r&&function(e){n.d(t,e,function(){return a[e]})}(r);t["default"]=i.a}},[["7211","common/runtime","common/vendor"]]]);