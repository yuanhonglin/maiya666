(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["components/chat/image"],{"20a3":function(e,t,a){"use strict";a.r(t);var n=a("dfac"),o=a.n(n);for(var c in n)"default"!==c&&function(e){a.d(t,e,function(){return n[e]})}(c);t["default"]=o.a},"295d":function(e,t,a){"use strict";var n,o=function(){var e=this,t=e.$createElement;e._self._c},c=[];a.d(t,"b",function(){return o}),a.d(t,"c",function(){return c}),a.d(t,"a",function(){return n})},"9e45":function(e,t,a){"use strict";a.r(t);var n=a("295d"),o=a("20a3");for(var c in o)"default"!==c&&function(e){a.d(t,e,function(){return o[e]})}(c);var s,u=a("f0c5"),i=Object(u["a"])(o["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],s);t["default"]=i.exports},dfac:function(e,t,a){"use strict";(function(e,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a("9e98"),c=a("44dd"),s=a("e985"),u={components:{},data:function(){return{}},props:{username:{type:Object,value:{}},chatType:{type:String,value:o.chatType.SINGLE_CHAT}},onUnload:function(){},methods:{openCamera:function(){var t=this;e.chooseImage({count:1,sizeType:["original","compressed"],sourceType:["camera"],success:function(e){t.upLoadImage(e)}})},sendImage:function(){var t=this;e.chooseImage({count:1,sizeType:["original","compressed"],sourceType:["album"],success:function(e){t.upLoadImage(e)}})},isGroupChat:function(){return this.chatType==o.chatType.CHAT_ROOM},getSendToParam:function(){return this.isGroupChat()?this.username.groupId:this.username.your},upLoadImage:function(t){n("log",t," at components\\chat\\image.vue:66");var a=this,u=t.tempFilePaths,i=e.getStorageSync("HuanXinToken");e.getImageInfo({src:t.tempFilePaths[0],success:function(t){var r={jpg:!0,gif:!0,png:!0,bmp:!0},m=a.$im.config.appkey.split("#"),f=t.width,p=t.height,l=t.path.lastIndexOf("."),d=~l&&t.path.slice(l+1)||"";d.toLowerCase()in r&&(n("log","https://a1.easemob.com/"+m[0]+"/"+m[1]+"/chatfiles"," at components\\chat\\image.vue:85"),e.uploadFile({url:"https://a1.easemob.com/"+m[0]+"/"+m[1]+"/chatfiles",filePath:u[0],name:"file",header:{"Content-Type":"multipart/form-data",Authorization:"Bearer "+i},success:function(t){var i=t.data,r=JSON.parse(i),m=a.$im.conn.getUniqueId(),l=new a.$im.message(o.IMAGE,m),h={type:o.IMAGE,size:{width:f,height:p},url:r.uri+"/"+r.entities[0].uuid,filetype:d,filename:u[0]};l.set({apiUrl:a.$im.config.apiURL,body:h,from:a.username.myName,to:a.username.yourName,ext:{fromName:e.getStorageSync("myUsername"),fromAvatar:a.$store.state.userInfo.avatar,hxMsgId:o.IMAGE+m,yonghuName:a.$store.state.userInfo.nickname},roomType:!1,success:function(e){c.fire("em.chat.sendSuccess",m)}}),a.chatType==o.chatType.CHAT_ROOM&&l.setGroup("groupchat");try{a.$emit("sendEnd"),e.setStorage({key:"cool",data:"1",success:function(){a.$im.conn.send(l.body),n("log","success"," at components\\chat\\image.vue:136")}})}catch(g){n("log","当前消息发送失败",g," at components\\chat\\image.vue:140")}n("log",l," at components\\chat\\image.vue:142"),s.saveMsg(l,o.IMAGE)},fail:function(e){n("log","图片失败:",e," at components\\chat\\image.vue:150")}}))}})}}};t.default=u}).call(this,a("6e42")["default"],a("0de9")["default"])}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'components/chat/image-create-component',
    {
        'components/chat/image-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('6e42')['createComponent'](__webpack_require__("9e45"))
        })
    },
    [['components/chat/image-create-component']]
]);
